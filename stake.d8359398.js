function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},i=e.parcelRequireb4d5;null==i&&((i=function(t){if(t in n)return n[t].exports;if(t in a){var e=a[t];delete a[t];var i={id:t,exports:{}};return n[t]=i,e.call(i.exports,i,i.exports),i.exports}var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(t,e){a[t]=e},e.parcelRequireb4d5=i),i("cSnus");var s=i("2tNqr"),o=i("71KSP"),d=i("7VRcZ"),c=i("6LYZy");const l=e=>new Number(t(c).utils.fromWei(e,"ether")).toFixed(4).toString();let r=[];async function m(t,e){return await e.methods.rewards(r).call({from:t})}async function u(t,e,n){const a=await e.eth.getChainId(),i=await async function(t,e,n){const a=`${e}/api/v1/assets?offset=0&limit=50&collection=${n}&owner=${t}`,i=await fetch(a);return(await i.json()).assets}(t,o.config[a].opensea_api,o.config[a].new_collection),s=document.getElementById("card-list");if(e.currentProvider.isMetaMask){document.getElementById("addTokenBtn").hidden=!1}i&&i.forEach((t=>{r.push(t.token_id),s.appendChild(function(t){const e=document.createElement("div");e.classList="nes-container item-card is-rounded",e.style="background-color: white; display: block;";const n=document.createElement("a");n.classList="nes-container is-rounded",n.href=t.permalink,n.target="_blank",n.style="background-color: white; padding: 0px !important; display: flex; justify-content: center";const a=document.createElement("img");a.src=t.image_thumbnail_url,a.crossOrigin="anonymous",a.style.width="100%",n.appendChild(a);const i=document.createElement("p");i.classList.add("pt-1"),i.textContent=t.name,e.appendChild(n),e.appendChild(i);const s=document.createElement("div");return s.classList.add("col-md-3","col-xs-6","pb-1"),s.appendChild(e),s}(t))}));const d=document.getElementById("claimableRewardsTxt"),c=await m(t,n);d.textContent=`${l(c)} $FOSSIL`}window.onload=async()=>{try{const e=await d.loadWeb3(),n=await d.web3Address(e),a=await e.eth.getChainId(),i=new e.eth.Contract(t(s).abi,o.config[a].migration_address);await d.switchChain(window.ethereum),await u(n,e,i);const c=document.getElementById("claimBtn");c.addEventListener("click",(async()=>await async function(e,n,a){e.disabled=!0,e.textContent="Claiming...",e.classList="nes-btn is-disabled";const i=await a.eth.getChainId(),d=new a.eth.Contract(t(s).abi,o.config[i].migration_address),c=await d.methods.claim(r).estimateGas({from:n});d.methods.claim(r).send({from:n,gas:c}).on("receipt",(async()=>{e.disabled=!0,e.classList="nes-btn is-success",e.textContent="Claimed";const t=document.getElementById("claimableRewardsTxt"),a=await m(n,d);t.textContent=`${l(a)} $FOSSIL`,setTimeout((()=>{e.disabled=!1,e.classList="nes-btn is-primary",e.textContent="Claim"}),3e3)})).on("transactionHash",(t=>{e.disabled=!1,e.textContent="Claiming...",e.classList="nes-btn",e.addEventListener("click",(()=>{window.open(`https://etherscan.io/tx/${t}`,"_blank").focus()}))})).on("error",(()=>{e.disabled=!0,e.textContent="Failed",e.classList="nes-btn is-error",setTimeout((()=>{e.disabled=!1,e.classList="nes-btn is-primary",e.textContent="Claim"}),3e3)}))}(c,n,e)))}catch(t){console.log(t)}};document.getElementById("addTokenBtn").addEventListener("click",(async()=>{await async function(t){const e=await d.loadWeb3(),n=await e.eth.getChainId(),a=o.config[n].token_address;try{await t.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:a,symbol:"FOSSIL",decimals:18,image:"https://gateway.pinata.cloud/ipfs/QmZpPpnuASN7riY1UwVftSMowJAgMbf9x1k9pCaH5buSEQ"}}})}catch(t){console.log(t)}}(window.ethereum)}));
//# sourceMappingURL=stake.d8359398.js.map
