function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},i=t.parcelRequireb4d5;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){a[e]=t},t.parcelRequireb4d5=i),i("cSnus");var s=i("2tNqr"),o=i("71KSP"),d=i("7VRcZ"),c=i("6LYZy");const l=t=>new Number(e(c).utils.fromWei(t,"ether")).toFixed(4).toString();let r=[];async function m(e,t){return await t.methods.rewards(r).call({from:e})}async function u(e,t,n){const a=await t.eth.getChainId(),i=await async function(e,t,n){const a=`${t}/api/v1/assets?offset=0&limit=50&collection=${n}&owner=${e}`,i=await fetch(a);return(await i.json()).assets}(e,o.config[a].opensea_api,o.config[a].new_collection),s=document.getElementById("card-list");if(t.currentProvider.isMetaMask){document.getElementById("addTokenBtn").hidden=!1}i&&i.forEach((e=>{r.push(e.token_id),s.appendChild(function(e){const t=document.createElement("div");t.classList="nes-container item-card is-rounded",t.style="background-color: white; display: block;";const n=document.createElement("a");n.classList="nes-container is-rounded",n.href=e.permalink,n.target="_blank",n.style="background-color: white; padding: 0px !important; display: flex; justify-content: center";const a=document.createElement("img");a.src=e.image_thumbnail_url,a.crossOrigin="anonymous",a.style.width="100%",n.appendChild(a);const i=document.createElement("p");i.classList.add("pt-1"),i.textContent=e.name,t.appendChild(n),t.appendChild(i);const s=document.createElement("div");return s.classList.add("col-md-3","col-xs-6","pb-1"),s.appendChild(t),s}(e))}));const d=document.getElementById("claimableRewardsTxt"),c=await m(e,n);d.textContent=`${l(c)} $FOSSIL`}window.onload=async()=>{try{const t=await d.loadWeb3(),n=await d.web3Address(t),a=await t.eth.getChainId(),i=new t.eth.Contract(e(s).abi,o.config[a].migration_address);await d.switchChain(window.ethereum),await u(n,t,i);const c=document.getElementById("claimBtn");c.addEventListener("click",(async()=>await async function(e,t,n){e.disabled=!0,e.textContent="Claiming...",e.classList="nes-btn is-disabled",n.methods.claim(r).send({from:t}).on("receipt",(async()=>{e.disabled=!0,e.classList="nes-btn is-success",e.textContent="Claimed";const a=document.getElementById("claimableRewardsTxt"),i=await m(t,n);a.textContent=`${l(i)} $FOSSIL`,setTimeout((()=>{e.disabled=!1,e.classList="nes-btn is-primary",e.textContent="Claim"}),3e3)})).on("transactionHash",(t=>{e.disabled=!1,e.textContent="Claiming...",e.classList="nes-btn",e.addEventListener("click",(()=>{window.open(`https://etherscan.io/tx/${t}`,"_blank").focus()}))})).on("error",(()=>{e.disabled=!0,e.textContent="Failed",e.classList="nes-btn is-error",setTimeout((()=>{e.disabled=!1,e.classList="nes-btn is-primary",e.textContent="Claim"}),3e3)}))}(c,n,i)))}catch(e){console.log(e)}};document.getElementById("addTokenBtn").addEventListener("click",(async()=>{await async function(e){const t=await d.loadWeb3(),n=await t.eth.getChainId(),a=o.config[n].token_address;try{await e.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:a,symbol:"FOSSIL",decimals:18,image:"https://gateway.pinata.cloud/ipfs/QmZpPpnuASN7riY1UwVftSMowJAgMbf9x1k9pCaH5buSEQ"}}})}catch(e){console.log(e)}}(window.ethereum)}));
//# sourceMappingURL=stake.0211462a.js.map
